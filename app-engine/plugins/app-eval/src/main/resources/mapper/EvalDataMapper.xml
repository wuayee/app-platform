<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.huawei.jade.app.engine.eval.mapper.EvalDataMapper" >
    <insert id="insertAll" useGeneratedKeys="true" keyProperty="id">
        insert into app_engine_eval_data (content, created_version, ds_id) values
        <foreach collection="list" separator="," item="item">
            (#{item.content}, #{item.createdVersion}, #{item.datasetId})
        </foreach>
    </insert>

    <update id="updateExpiredVersion">
        update app_engine_eval_data
        set expired_version = #{version}
        where (expired_version = 9223372036854775807) AND id in
        <foreach collection="list" separator="," item="item" open="(" close=")">
            (#{item.id})
        </foreach>
    </update>
</mapper>