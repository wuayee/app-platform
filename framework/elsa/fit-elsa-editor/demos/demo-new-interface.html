<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <style>
        .simple-box {
            padding: 10px;
            margin: 1em 0;

            background: rgba(0, 0, 0, 0.1);
            border: solid 1px hsl(0, 0%, 77%);
            border-radius: 2px;
        }

        .simple-box-title, .simple-box-description {
            padding: 10px;
            margin: 0;

            background: #FFF;
            border: solid 1px hsl(0, 0%, 77%);
        }

        .simple-box-title {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
<div>
    <div id="document-toolbar"></div>
    <div id="container" style="display: flex">
        <div style="width: 960px; margin: 0 auto; background: white; height: calc(100vh);outline: none;white-space:pre-line"
             id="document-editable">
        </div>
        <div style="width: 960px; margin: 0 auto; background: white; height: calc(100vh);outline: none"
             id="document-2"></div>
    </div>
</div>

<script type="module">
    import ElsaEditor from "../build/elsa-editor.js";

    const paragraphData = [{
        name: "paragraph", children: [{data: "111111111111111111111"}]
    }, {
        name: "paragraph", children: [{data: "222222222222222222222222222222222222222"}]
    }, {
        name: "paragraph", children: [{data: "33333333333333333333333333333333333333333"}]
    }];

    const paragraphData1 = [{
        name: "paragraph", children: [{data: "sssssssssssssssssssss"}]
    }, {
        name: "paragraph", children: [{data: "ddddddddddddddddddddddddddddddddddddddd"}]
    }, {
        name: "paragraph", children: [{data: "ffffffffffffffffffffffffffffffffffffffffff"}]
    }];

    window.onload = () => {

        let id = 100;
        ElsaEditor.create({}, {generateId: () => id++ + ""})
            .then(editor => {
                window.editor = editor;
                editor.renderToolbar(document.getElementById("document-toolbar"));
                editor.registerRoot("test1", document.getElementById("document-editable"));
                editor.registerRoot("test2", document.getElementById("document-2"));

                // editor.setData({test1: "<p>大纲：<br><br>I. 引言<br>   A. 介绍《陈情表》的背景和作者<br>   B. 提出文章的主题：李密的《陈情表》如何反映当时社会的状况<br>\nII. 李密的个人情况\n   A. 李密的生平简介\n   B. 李密的官职和地位\n   C. 李密的家庭背景\n\nIII. 《陈情表》的内容\n   A. 《陈情表》的主要内容概述\n   B. 《陈情表》中李密的个人情感和态度\n   C. 《陈情表》中李密对社会状况的描述和分析\n\nIV. 《陈情表》的社会背景\n   A. 当时的社会状况和政治环境\n   B. 当时的社会风气和道德观念\n   C. 当时的社会矛盾和问题\n\nV. 《陈情表》的影响和意义\n   A. 《陈情表》在文学史上的地位和影响\n   B. 《陈情表》对后世的影响和启示\n   C. 《陈情表》对现代社会的启示和借鉴\n\n详细解释：\n大纲中的每一部分都围绕着文章的主题展开，即李密的《陈情表》如何反映当时社会的状况。在引言部分，我们首先介绍了《陈情表》的背景和作者，然后提出了文章的主题。在李密的个人情况部分，我们介绍了李密的生平简介、官职和地位以及家庭背景，这些信息有助于我们理解李密的个人情感和态度。在《陈情表》的内容部分，我们概述了《陈情表》的主要内容，描述了李密的个人情感和态度，以及他对社会状况的描述和分析。在《陈情表》的社会背景部分，我们介绍了当时的社会状况和政治环境，社会风气和道德观念，以及社会矛盾和问题。在《陈情表》的影响和意义部分，我们讨论了《陈情表》在文学史上的地位和影响，对后世的影响和启示，以及对现代社会的启示和借鉴。</p>"});
                // editor.setData({test2: paragraphData1});

                editor.on("test1:selection:change", (eventInfo, data) => {
                    console.log("selection change with blocks");
                });

                editor.on("test1:copy", (eventInfo, data) => {
                    console.log("test1 copy triggered");
                });

                editor.on("test1:cut", (eventInfo, data) => {
                    console.log("test1 cut triggered");
                });

                editor.on("test1:deleteBatch", (eventInfo, data) => {
                   console.log("test1 delete batch");
                });

                editor.on("test1:paste", (eventInfo, data) => {
                    console.log("test1 paste triggered");
                });

                // editor.model.on("deleteContent", (eventInfo, data) => {
                //     console.log("delete content triggered");
                // }, {priority: 'highest'});

                // focus相关.
                editor.editing.view.focus();
            })
            .catch(error => {
                console.error('There was a problem initializing the editor.', error);
            });
    }
</script>
</body>
</html>