<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <style>
        .simple-box {
            padding: 10px;
            margin: 1em 0;

            background: rgba(0, 0, 0, 0.1);
            border: solid 1px hsl(0, 0%, 77%);
            border-radius: 2px;
        }

        .simple-box-title, .simple-box-description {
            padding: 10px;
            margin: 0;

            background: #FFF;
            border: solid 1px hsl(0, 0%, 77%);
        }

        .simple-box-title {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
<div>
    <div id="document-toolbar"></div>
    <div id="container" style="display: flex">
        <div style="width: 960px; margin: 0 auto; background: white; height: calc(100vh);outline: none;white-space:pre-line"
             id="document-editable">
        </div>
        <div style="width: 960px; margin: 0 auto; background: white; height: calc(100vh);outline: none"
             id="document-2"></div>
    </div>
</div>

<script type="module">
    import ElsaEditor from "../build/elsa-editor.js";

    const paragraphData = [{
        name: "paragraph", children: [{data: "111111111111111111111"}]
    }, {
        name: "paragraph", children: [{data: "222222222222222222222222222222222222222"}]
    }, {
        name: "paragraph", children: [{data: "33333333333333333333333333333333333333333"}]
    }];

    const paragraphData1 = [{
        name: "paragraph", children: [{data: "sssssssssssssssssssss"}]
    }, {
        name: "paragraph", children: [{data: "ddddddddddddddddddddddddddddddddddddddd"}]
    }, {
        name: "paragraph", children: [{data: "ffffffffffffffffffffffffffffffffffffffffff"}]
    }];

    window.onload = () => {

        let id = 100;
        ElsaEditor.create({}, {
            // placeholder: {
            //     test1: "type in test1...",
            //     test2: "type in test2..."
            // },
            generateId: () => id++ + ""
        }).then(editor => {
            window.editor = editor;
            editor.renderToolbar(document.getElementById("document-toolbar"));
            editor.registerRoot("test1", document.getElementById("document-editable"));
            editor.registerRoot("test2", document.getElementById("document-2"));
            editor.setData({test1: '<p>123123</p>'});

            editor.setPlaceholder("test1", "请输入...");

            editor.on("test1:selection:change", (eventInfo, data) => {
                console.log("selection change with blocks");
            });

            editor.on("test1:copy", (eventInfo, data) => {
                console.log("test1 copy triggered");
            });

            editor.on("test1:cut", (eventInfo, data) => {
                console.log("test1 cut triggered");
            });

            editor.on("test1:deleteBatch", (eventInfo, data) => {
                console.log("test1 delete batch");
            });

            editor.on("test1:paste", (eventInfo, data) => {
                console.log("test1 paste triggered");
            });

            // editor.model.on("deleteContent", (eventInfo, data) => {
            //     console.log("delete content triggered");
            // }, {priority: 'highest'});

            // focus相关.
            editor.editing.view.focus();
        })
            .catch(error => {
                console.error('There was a problem initializing the editor.', error);
            });
    }
</script>
</body>
</html>