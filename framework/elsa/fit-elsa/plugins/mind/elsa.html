<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>elsa</title>
    <script type="module" language="javascript">
        console.log("test");
        import { ELSA } from "../../core/elsaEntry.js";

        const graphId = "huizi-xmind-00001 graph";
        window.onload = async () => {
            // const g = await ELSA.editGraph(graphId, "graph", document.getElementById("main"));
            // if (g !== undefined) {
            //     g.openCollaboration();
            //     return;
            // }

            ELSA.newGraph(graphId, "graph", document.getElementById("main"))
                .then(async agent => {
                    // agent.openCollaboration();
                    const g = agent._graph;
                    window.g = g;
                    g.import('/fit/portal/fit-elsa/plugins/mind/mind.js')
                        .import('/fit/portal/fit-elsa/plugins/mind/topic.js')
                        .import('/fit/portal/fit-elsa/plugins/mind/subTopic.js')
                        .then(shapes => {
                            const p = g.addPage("xmind");
                            p.startAnimation();
                            p.createNew("mind", 300, 300);
                            p.reset();
                            const data = p.serialize();
                            console.log(JSON.stringify(data));
                        })
                });
        };
    </script>
</head>

<body>
    <div id="main" style="width:1200px; height: 1200px;border: 2px;position: relative;"></div>
    <div id="point" style="width:6px; height: 6px;position: absolute;left:397px;top:397px;background-color: blue;">
    </div>
    <!-- <button onclick="p.save()">Save as image (tested on PC browser only)</button> -->

</body>

</html>