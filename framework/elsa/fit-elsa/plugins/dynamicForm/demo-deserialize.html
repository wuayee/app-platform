<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>dynamicForm-Demo-Deserialize</title>


    <script type="module">
        import {ELSA} from "../../core/elsaEntry.js";
        import {PAGE_MODE} from "../../common/const.js";

        const graphId = "dynamic-form-demo deserialize";
        window.onload = async () => {
            ELSA.newGraph(graphId, "graph", document.getElementById("main"))
                .then(async agent => {
                    const g = agent._graph;
                    window.g = g;
                    g.import('/fit/portal/fit-elsa/plugins/dynamicForm/form.js')
                        .then(shapes => {
                            const p = g.addPage("dynamic form demo");
                            const data = "{\"type\":\"page\",\"id\":\"elsa-page:6ci74l\",\"text\":\"dynamic form demo\",\"namespace\":\"elsa\",\"x\":0,\"y\":0,\"width\":1600,\"height\":1200,\"bold\":false,\"italic\":false,\"dockAlign\":\"top\",\"itemSpace\":5,\"itemPad\":[0,0,0,0],\"itemScroll\":{\"x\":0,\"y\":0},\"hideText\":true,\"dockMode\":\"none\",\"shapesAs\":{},\"borderColor\":\"white\",\"backColor\":\"white\",\"fontSize\":18,\"fontFace\":\"arial\",\"fontColor\":\"#ECD0A7\",\"fontWeight\":\"bold\",\"fontStyle\":\"normal\",\"hAlign\":\"left\",\"vAlign\":\"top\",\"moveable\":true,\"container\":\"elsa-page:6ci74l\",\"dirty\":false,\"isPage\":true,\"shapes\":[{\"type\":\"form\",\"id\":\"gg9cg5\",\"text\":\"dynamic form\",\"namespace\":\"dynamic-form\",\"container\":\"elsa-page:6ci74l\",\"x\":200,\"y\":50,\"width\":800,\"height\":300,\"bold\":false,\"italic\":false,\"dockAlign\":\"top\",\"itemSpace\":5,\"itemPad\":[5,5,5,5],\"itemScroll\":{\"x\":0,\"y\":0},\"hideText\":true,\"borderWidth\":4,\"fontColor\":\"whitesmoke\",\"dockMode\":\"vertical\",\"cornerRadius\":8,\"index\":100,\"dirty\":true},{\"type\":\"htmlDiv\",\"id\":\"qbkvcx\",\"text\":\"container\",\"namespace\":\"dynamic-form\",\"container\":\"gg9cg5\",\"x\":205,\"y\":55,\"width\":790,\"height\":70,\"bold\":false,\"italic\":false,\"dockAlign\":\"top\",\"itemSpace\":8,\"itemPad\":[2,2,2,2],\"itemScroll\":{\"x\":0,\"y\":0},\"hideText\":true,\"dashWidth\":5,\"borderColor\":\"SILVER\",\"index\":101,\"dockMode\":\"fill\",\"dirty\":true},{\"type\":\"htmlLabel\",\"id\":\"j525f0\",\"text\":\"Elsa Dynamic Form Demo\",\"namespace\":\"dynamic-form\",\"container\":\"qbkvcx\",\"x\":207,\"y\":57,\"width\":786,\"height\":66,\"bold\":false,\"italic\":false,\"borderColor\":\"SILVER\",\"focusBorderColor\":\"SILVER\",\"fontColor\":\"DIMGRAY\",\"hAlign\":\"left\",\"borderWidth\":0,\"index\":102,\"fontSize\":40,\"dirty\":true},{\"type\":\"htmlHr\",\"id\":\"4o9lan\",\"text\":\"\",\"namespace\":\"dynamic-form\",\"container\":\"gg9cg5\",\"x\":205,\"y\":130,\"width\":790,\"height\":3,\"bold\":false,\"italic\":false,\"borderWidth\":0,\"backColor\":\"DIMGRAY\",\"index\":103,\"dirty\":true},{\"type\":\"htmlInput\",\"id\":\"it4k8u\",\"text\":\"container\",\"namespace\":\"dynamic-form\",\"container\":\"gg9cg5\",\"x\":205,\"y\":138,\"width\":790,\"height\":160,\"bold\":false,\"italic\":false,\"dockAlign\":\"left\",\"itemSpace\":8,\"itemPad\":[2,2,2,2],\"itemScroll\":{\"x\":0,\"y\":0},\"hideText\":true,\"dashWidth\":5,\"borderColor\":\"SILVER\",\"dockMode\":\"horizontal\",\"index\":104,\"dirty\":true},{\"type\":\"htmlLabel\",\"id\":\"aqka5l\",\"text\":\"input label\",\"namespace\":\"dynamic-form\",\"container\":\"it4k8u\",\"x\":207,\"y\":140,\"width\":128.33333333333334,\"height\":156,\"bold\":false,\"italic\":false,\"borderColor\":\"SILVER\",\"focusBorderColor\":\"SILVER\",\"fontColor\":\"DIMGRAY\",\"hAlign\":\"center\",\"borderWidth\":0,\"index\":105,\"fontSize\":16},{\"type\":\"htmlText\",\"id\":\"bvlaeb\",\"text\":\"default content\",\"namespace\":\"dynamic-form\",\"container\":\"it4k8u\",\"x\":343.33333333333337,\"y\":140,\"width\":641.6666666666667,\"height\":156,\"bold\":false,\"italic\":false,\"borderColor\":\"DIMGRAY\",\"focusBorderColor\":\"DIMGRAY\",\"fontColor\":\"DIMGRAY\",\"hAlign\":\"left\",\"borderWidth\":1,\"cornerRadius\":5,\"index\":106,\"fontSize\":25,\"dataBinding\":\"$.info.nickName\"},{\"type\":\"htmlHr\",\"id\":\"44ibxq\",\"text\":\"\",\"namespace\":\"dynamic-form\",\"container\":\"gg9cg5\",\"x\":205,\"y\":303,\"width\":790,\"height\":3,\"bold\":false,\"italic\":false,\"borderWidth\":0,\"backColor\":\"DIMGRAY\",\"index\":107,\"dirty\":true},{\"type\":\"htmlDiv\",\"id\":\"y52qn1\",\"text\":\"container\",\"namespace\":\"dynamic-form\",\"container\":\"gg9cg5\",\"x\":205,\"y\":311,\"width\":790,\"height\":34,\"bold\":false,\"italic\":false,\"dockAlign\":\"top\",\"itemSpace\":8,\"itemPad\":[2,2,2,2],\"itemScroll\":{\"x\":0,\"y\":0},\"hideText\":true,\"dashWidth\":5,\"borderColor\":\"SILVER\",\"index\":108,\"dockMode\":\"horizontal\",\"hAlign\":\"right\",\"dirty\":true},{\"type\":\"htmlButton\",\"id\":\"b7ay0t\",\"text\":\"Submit\",\"namespace\":\"dynamic-form\",\"container\":\"y52qn1\",\"x\":893,\"y\":313,\"width\":100,\"height\":30,\"bold\":false,\"italic\":false,\"borderColor\":\"gray\",\"focusBorderColor\":\"SILVER\",\"fontColor\":\"DIMGRAY\",\"hAlign\":\"center\",\"borderWidth\":1,\"fontSize\":18,\"index\":109,\"clickCode\":\"function (page, shape) {\\n                                const form = shape.getForm();\\n                                const json = form.getJSON();\\n                                window.testStore.store(json);\\n                            }\",\"dirty\":true}],\"index\":0}";
                            p.mode = PAGE_MODE.CONFIGURATION;
                            p.deSerialize(JSON.parse(data)).then(()=>{
                                p.reset();
                            });
                        });

                });
        };

    </script>
</head>

<body>
<div>
    <button id="loadForm">loadForm</button>
    <button id="serializeForm">serializeForm</button>
    <button id="deSerializeForm">deSerializeForm</button>
</div>
<div id="main" style="width:1600px; height: 1200px;position: absolute;"></div>
<div id="point" style="width:6px; height: 6px;position: absolute;left:397px;top:397px;background-color: brown;">
</div>

</body>

</html>