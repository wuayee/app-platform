/*---------------------------------------------------------------------------------------------
 *  Copyright (c) 2025 Huawei Technologies Co., Ltd. All rights reserved.
 *  This file is a part of the ModelEngine Project.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

import {svg} from "./svg.js";

/**
 * 圆角矩形标注
 */
const roundedRectangleCallout = (id, x, y, width, height, parent) => {
    let self = svg(id, x, y, width, height, parent);
    self.type = "roundedRectangleCallout";
    self.getSvg = () => {
        return `<svg id=${self.type + "-svg:" + self.id} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 77.003">
                        <defs><style>.a{fill:${(self.getBackColor())};}.b,.c{stroke: ${self.getBorderColor()};stroke-width:${self.borderWidth}}}</style></defs>
                        <g class="a" transform="translate(-2102 -13679.002)">
                        <path class="b" d="M 2136.49853515625 13755.232421875 L 2136.49853515625 13744.51953125 L 2136.49853515625 13744.01953125 L 2135.99853515625 13744.01953125 L 2112.001708984375 13744.01953125 C 2106.7626953125 13744.01953125 2102.500244140625 13739.7568359375 2102.500244140625 13734.517578125 L 2102.500244140625 13688.9990234375 C 2102.500244140625 13683.7626953125 2106.7626953125 13679.501953125 2112.001708984375 13679.501953125 L 2191.998291015625 13679.501953125 C 2197.2373046875 13679.501953125 2201.499755859375 13683.7626953125 2201.499755859375 13688.9990234375 L 2201.499755859375 13734.517578125 C 2201.499755859375 13739.7568359375 2197.2373046875 13744.01953125 2191.998291015625 13744.01953125 L 2161.572265625 13744.01953125 L 2161.465087890625 13744.01953125 L 2161.367431640625 13744.0634765625 L 2136.49853515625 13755.232421875 Z"/><path class="c" d="M 2136.99853515625 13754.4599609375 L 2161.35791015625 13743.51953125 L 2191.998291015625 13743.51953125 C 2196.961669921875 13743.51953125 2200.999755859375 13739.4814453125 2200.999755859375 13734.517578125 L 2200.999755859375 13688.9990234375 C 2200.999755859375 13684.0380859375 2196.961669921875 13680.001953125 2191.998291015625 13680.001953125 L 2112.001708984375 13680.001953125 C 2107.038330078125 13680.001953125 2103.000244140625 13684.0380859375 2103.000244140625 13688.9990234375 L 2103.000244140625 13734.517578125 C 2103.000244140625 13739.4814453125 2107.038330078125 13743.51953125 2112.001708984375 13743.51953125 L 2136.99853515625 13743.51953125 L 2136.99853515625 13754.4599609375 M 2135.99853515625 13756.0048828125 L 2135.99853515625 13744.51953125 L 2112.001708984375 13744.51953125 C 2106.47802734375 13744.51953125 2102.000244140625 13740.0419921875 2102.000244140625 13734.517578125 L 2102.000244140625 13688.9990234375 C 2102.000244140625 13683.4794921875 2106.47802734375 13679.001953125 2112.001708984375 13679.001953125 L 2191.998291015625 13679.001953125 C 2197.52197265625 13679.001953125 2201.999755859375 13683.4794921875 2201.999755859375 13688.9990234375 L 2201.999755859375 13734.517578125 C 2201.999755859375 13740.0419921875 2197.52197265625 13744.51953125 2191.998291015625 13744.51953125 L 2161.572265625 13744.51953125 L 2135.99853515625 13756.0048828125 Z"/></g></svg>`;
    };

    /**
     * 重写获取配置方法.
     * 1、该图形不需要corerRadius配置.
     */
    const getConfigurations = self.getConfigurations;
    self.getConfigurations = () => {
        const configurations = getConfigurations.apply(self);
        configurations.remove(c => c.field === "cornerRadius");
        return configurations;
    }

    return self;
}

export {roundedRectangleCallout};