<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>融合编辑器DEMO</title>
    <style>

    </style>
    <script src="http://s3-hc-dgg.hics.huawei.com/fit.elsa.bucket/react.development.js" crossorigin></script>
    <script src="http://s3-hc-dgg.hics.huawei.com/fit.elsa.bucket/react-dom.development.js" crossorigin></script>
    <script type="module">
        import {graph, PAGE_MODE} from '../../build/elsa.js';

        let doc = null;
        let doc1 = null;

        let loadGraph = async () => {
            const g = graph(document.getElementById("editor"), "融合demo", PAGE_MODE.CONFIGURATION);
            g.initialize()
                .then(async shapes => {
                    const WIDTH = 1440;
                    const HEIGHT = 965;
                    const dom = document.getElementById("editor");

                    const page = g.addPage("editor-demo");
                    const c1 = page.createNew("container", dom.clientWidth / 2 - WIDTH / 2, 2);
                    c1.width = WIDTH;
                    c1.height = HEIGHT;
                    c1.focusBorderColor = "gray";

                    // 布局1
                    const c2 = page.createNew("container", dom.clientWidth / 2 - WIDTH / 2, 12);
                    c2.width = WIDTH;
                    c2.height = 40;
                    c2.borderWidth = 0;
                    c2.borderColor = 'red';

                    const rect = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 5, 15);
                    rect.width = 120;
                    rect.height = 40;
                    rect.text = "> 需求详情";
                    rect.borderWidth = 0;
                    // rect.borderColor = 'sliver';

                    const rect1 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + WIDTH - 150, 15);
                    rect1.width = 80;
                    rect1.height = 26;
                    rect1.text = "复制链接";
                    rect1.backColor = "#2196F3";
                    rect1.fontColor = "#fff";

                    const rect2 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + WIDTH - 60, 15);
                    rect2.width = 45;
                    rect2.height = 26;
                    rect2.text = "编辑";
                    rect2.backColor = "#2196F3";
                    rect2.fontColor = "#fff";


                    // 布局2
                    const c3 = page.createNew("container", dom.clientWidth / 2 - WIDTH / 2, 40);
                    c3.width = WIDTH;
                    c3.height = 80;
                    c3.borderWidth = 0;
                    c3.borderColor = 'sliver';

                    const rect3 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 15, 50);
                    rect3.width = 40;
                    rect3.height = 32;
                    rect3.text = "SR";
                    rect3.borderColor = '#5CDFF6';
                    rect3.fontColor = "#333";

                    const rect4 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 65, 45);
                    rect4.width = 700;
                    rect4.height = 40;
                    rect4.text = "适配研发漏洞DTS单流程，归一漏洞流程处理，提高用户效率";
                    rect4.borderWidth = 0;
                    rect4.borderColor = 'sliver';
                    rect4.hAlign = "left";
                    rect4.fontSize = 22;
                    rect4.fontColor = "#333";

                    const rect5 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 15, 90);
                    rect5.width = 600;
                    rect5.height = 40;
                    rect5.text = "SR896645688908098 由马莉亚 00558975创建于2022.2.22 14:00";
                    rect5.borderWidth = 0;
                    rect5.borderColor = 'sliver';
                    rect5.hAlign = "left";
                    rect5.fontColor = "#333";

                    // 布局3
                    const c4 = page.createNew("container", dom.clientWidth / 2 - WIDTH / 2, 130);
                    c4.width = WIDTH;
                    c4.height = 80;
                    c4.borderWidth = 0;
                    c4.borderColor = 'sliver';

                    const rect6 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 15, 130);
                    rect6.width = 80;
                    rect6.height = 32;
                    rect6.text = "需求描述";
                    rect6.borderWidth = 0;
                    rect6.borderColor = 'sliver';
                    rect6.fontColor = "#333";

                    const rect7 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 120, 130);
                    rect7.width = 80;
                    rect7.height = 32;
                    rect7.text = "设计文档";
                    rect7.borderWidth = 0;
                    rect7.borderColor = 'sliver';
                    rect7.fontColor = "#333";

                    const rect8 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 210, 130);
                    rect8.width = 80;
                    rect8.height = 32;
                    rect8.text = "建模";
                    rect8.borderWidth = 0;
                    rect8.borderColor = 'sliver';
                    rect8.fontColor = "#333";

                    const rect9 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 290, 130);
                    rect9.width = 80;
                    rect9.height = 32;
                    rect9.text = "关联需求";
                    rect9.borderWidth = 0;
                    rect9.borderColor = 'sliver';
                    rect9.fontColor = "#333";

                    const rect10 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 390, 130);
                    rect10.width = 80;
                    rect10.height = 32;
                    rect10.text = "需求评审";
                    rect10.borderWidth = 0;
                    rect10.borderColor = 'sliver';
                    rect10.fontColor = "#333";

                    const rect11 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 490, 130);
                    rect11.width = 80;
                    rect11.height = 32;
                    rect11.text = "变更";
                    rect11.borderWidth = 0;
                    rect11.borderColor = 'sliver';
                    rect11.fontColor = "#333";

                    const rect12 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 590, 130);
                    rect12.width = 80;
                    rect12.height = 32;
                    rect12.text = "E2E";
                    rect12.borderWidth = 0;
                    rect12.borderColor = 'sliver';
                    rect12.fontColor = "#333";

                    const rect13 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 690, 130);
                    rect13.width = 80;
                    rect13.height = 32;
                    rect13.text = "活动记录";
                    rect13.borderWidth = 0;
                    rect13.borderColor = 'sliver';
                    rect13.fontColor = "#333";

                    const l2 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 15, 160);
                    l2.width = WIDTH;
                    l2.text = "";
                    l2.borderColor = '#c1c1c1';
                    l2.beginArrow = false;
                    l2.endArrow = false;

                    const l1 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 15, 159);
                    l1.width = 80;
                    l1.text = "";
                    l1.borderWidth = 2;
                    l1.borderColor = '#2196F3';
                    l1.beginArrow = false;
                    l1.endArrow = false;

                    // 布局4
                    const c5 = page.createNew("container", dom.clientWidth / 2 - WIDTH / 2, 166);
                    c5.width = WIDTH;
                    c5.height = 900;
                    c5.borderWidth = 0;
                    c5.borderColor = 'sliver';

                    const rect14 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2, 166);
                    rect14.width = 900;
                    rect14.height = 900;
                    rect14.text = "这是一个引擎，租户主要用于资源控制、业务隔离的场景。在实际业务中，管理员需要先明确使用集群资源的业务场景，规划租户。的场景。在实际业务中，管理员需要先明确使用集群资源的业务场景，规划租户的场景。在实际业务中，管理员需要先明确使用集群资源的业务场景，规划租户的场景。在实际业务中，管理员需要先明确使用集群资源的业务场景，规划租户的场景。在实际业务中，管理员需要先明确使用集群资源的业务场景，规划租户的场景。在实际业务中，管理员需要先明确使用集群资源的业务场景，规划租户的场景。在实际业务中，管理员需要先明确使用集群资源的业务场景，规划租户";
                    rect14.borderWidth = 0;
                    rect14.borderColor = 'sliver';
                    rect14.backColor = '#fff';
                    rect14.hAlign = "left";
                    rect14.fontColor = "#333";

                    const rect15 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 900, 166);
                    rect15.width = 1;
                    rect15.height = 900;
                    rect15.text = "";
                    rect15.borderColor = '#c1c1c1';

                    const rect16 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 901, 166);
                    rect16.width = 540;
                    rect16.height = 900;
                    rect16.text = "";
                    rect16.borderWidth = 0;
                    rect16.borderColor = 'sliver';

                    const rect17 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 901, 166);
                    rect17.width = 540;
                    rect17.height = 46;
                    rect17.text = "> 基本信息";
                    rect17.borderWidth = 0;
                    rect17.borderColor = 'sliver';
                    rect17.backColor = "#F2F5FC";

                    const l5 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 901, 210);
                    l5.width = 540;
                    l5.height = 1;
                    l5.text = "";
                    l5.borderColor = '#c1c1c1';

                    const rect18 = page.createNew("container", dom.clientWidth / 2 - WIDTH / 2 + 901, 212);
                    rect18.width = 540;
                    rect18.height = 800;
                    rect18.text = "";
                    rect18.borderWidth = 0;
                    rect18.borderColor = 'sliver';
                    rect18.backColor = "#fff";

                    const rect19 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 901, 212);
                    rect19.width = 30;
                    rect19.height = 900;
                    rect19.text = "";
                    rect19.borderWidth = 0;
                    rect19.borderColor = 'sliver';
                    rect19.backColor = "#F2F5FC";

                    const rect20 = page.createNew("rectangle", dom.clientWidth / 2 - WIDTH / 2 + 931, 212);
                    rect20.width = 1;
                    rect20.height = 900;
                    rect20.text = "";
                    rect20.borderColor = '#c1c1c1';

                    const lb1 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 960, 232);
                    lb1.width = 120;
                    lb1.height = 36;
                    lb1.text = "所属版本";
                    lb1.borderWidth = 0;
                    lb1.borderColor = 'sliver';
                    lb1.backColor = "#fff";
                    const v1 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 1080, 232);
                    v1.width = 120;
                    v1.height = 36;
                    v1.text = "LiBing-3.0";
                    v1.borderWidth = 0;
                    v1.borderColor = 'sliver';
                    v1.backColor = "#fff";

                    const lb2 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 960, 282);
                    lb2.width = 120;
                    lb2.height = 36;
                    lb2.text = "架构元素";
                    lb2.borderWidth = 0;
                    lb2.borderColor = 'sliver';
                    lb2.backColor = "#fff";
                    const v2 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 1080, 282);
                    v2.width = 120;
                    v2.height = 36;
                    v2.text = "未知";
                    v2.borderWidth = 0;
                    v2.borderColor = 'sliver';
                    v2.backColor = "#fff";

                    const lb3 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 960, 332);
                    lb3.width = 120;
                    lb3.height = 36;
                    lb3.text = "创建类型";
                    lb3.borderWidth = 0;
                    lb3.borderColor = 'sliver';
                    lb3.backColor = "#fff";
                    const v3 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 1080, 332);
                    v3.width = 120;
                    v3.height = 36;
                    v3.text = "新增";
                    v3.borderWidth = 0;
                    v3.borderColor = 'sliver';
                    v3.backColor = "#fff";

                    const lb4 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 960, 382);
                    lb4.width = 120;
                    lb4.height = 36;
                    lb4.text = "优先级";
                    lb4.borderWidth = 0;
                    lb4.borderColor = 'sliver';
                    lb4.backColor = "#fff";
                    const v4 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 1080, 382);
                    v4.width = 120;
                    v4.height = 36;
                    v4.text = "高";
                    v4.borderWidth = 0;
                    v4.borderColor = 'sliver';
                    v4.backColor = "#fff";

                    const lb5 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 960, 432);
                    lb5.width = 120;
                    lb5.height = 36;
                    lb5.text = "期望交付时间";
                    lb5.borderWidth = 0;
                    lb5.borderColor = 'sliver';
                    lb5.backColor = "#fff";
                    const v5 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 1080, 432);
                    v5.width = 120;
                    v5.height = 36;
                    v5.text = "未知";
                    v5.borderWidth = 0;
                    v5.borderColor = 'sliver';
                    v5.backColor = "#fff";

                    const lb6 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 960, 482);
                    lb6.width = 120;
                    lb6.height = 36;
                    lb6.text = "承诺交付时间";
                    lb6.borderWidth = 0;
                    lb6.borderColor = 'sliver';
                    lb6.backColor = "#fff";
                    const v6 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 1080, 482);
                    v6.width = 120;
                    v6.height = 36;
                    v6.text = "未知";
                    v6.borderWidth = 0;
                    v6.borderColor = 'sliver';
                    v6.backColor = "#fff";

                    const lb7 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 960, 532);
                    lb7.width = 120;
                    lb7.height = 36;
                    lb7.text = "工作量";
                    lb7.borderWidth = 0;
                    lb7.borderColor = 'sliver';
                    lb7.backColor = "#fff";
                    const v7 = page.createNew("text", dom.clientWidth / 2 - WIDTH / 2 + 1080, 532);
                    v7.width = 120;
                    v7.height = 36;
                    v7.text = "23人月";
                    v7.borderWidth = 0;
                    v7.borderColor = 'sliver';
                    v7.backColor = "#fff";

                    page.invalidate();

                });
            return g;
        }
        window.onload = () => {
            loadGraph();
        }

        window.onkeydown = (e) => {
            if (e.ctrlKey && (e.code === "KeyM")) {
                if (doc) {
                    const rotateAble = doc.rotateAble;
                    doc.rotateAble = !rotateAble;
                    if (doc.rotateAble) {
                        doc.manageConnectors = doc.getOriginalManageConnectors();
                    } else {
                        doc.manageConnectors = () => {
                            doc.connectors = []
                        };
                    }
                }

                if (doc1) {
                    const rotateAble = doc1.rotateAble;
                    doc1.rotateAble = !rotateAble;
                    if (doc1.rotateAble) {
                        doc1.manageConnectors = doc1.getOriginalManageConnectors();
                    } else {
                        doc1.manageConnectors = () => {
                            doc1.connectors = []
                        };
                    }
                }
                return false;
            }
        }
    </script>

    <style type=text/css>
        html,
        body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            margin: 0;
        }

        .container {
            width: 100%;
            position: absolute;
            overflow-y: scroll;
            height: calc(100vh);
        }
    </style>
</head>
<body>
<div id='editor' class='container'></div>
</body>
</html>