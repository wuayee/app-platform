# 检查文档去除目录插件

## 背景

1. 本插件实现了对文档文章的目录去除。

## 约束
1. 逐行正则匹配“目录”、“content”、“contents”、“目 录”关键字，如果匹配到即更新目录起始索引、目录结束索引；
2. 匹配到关键字后，将逐行正则匹配目录结构，若匹配，则只更新目录结束索引；若不匹配，则更新连续不符合目录结构次数。当连续不符合目录结构次数大于3，则判定找到目录结束位置，结束匹配。
3. 根据目录起始索引、结束索引将目录进行去除，保留其余段落。
4. 若只匹配到目录关键字，没有匹配目录结构，则保留目录关键字

## 注意
1. 目录结构由目录前缀格式、目录中间格式、目录结尾格式三部分组成。目录前缀格式的正则表达式为"^(前言|About This Document|\d+(\.\d+)*|[a-zA-Z]+(\.\d+)*)"；目录中间格式由7个以上的点组成，正则为"\.{7,}"。由于word抽取开源组件问题，word无法抽取目录结构中的点；目录结尾为页码，页码可以为罗马数字或阿拉伯数字，正则为"(\d|[IXV]+)$"，不区分大小写
2. 目录结构通过两种方式匹配，第一种方式为匹配目录结构的前缀和结尾；另一种方式通过匹配目录结构的中间格式
3. 以下为目录结构的示例（XXX为目录标题）：
“1 XXX ..........................20”
“1.1.2 XXX ..........................20”
“A.1 XXX............................80”
“A XXX............................80”
“前言 ....................ii”
“About This Document ....................ii”

在目录范围内，以下形式也会判定属于目录格式
“1 XXX 20”
“1.1.2 XXX 20”
“A.1 XXX 80”
“A XXX 80”
“前言ii”
“About This Document ii”

## 调用接口输入
``` python
inputs = [
    {
        "businessData": {
           "params": {}
		},
        "passData": {
            "data": "",
            "text": "目录：前言\n本篇文档介绍了",  # 待处理数据
            "meta": {
                "fileName": "xxx.doc"
            }  # 待处理数据元信息 
        },
        "contextData": ""
    },
    {}
]
```

## 调用接口输出
``` python
outputs = [
    {
        "businessData": {
            "params": {}
		},
        "passData": {
            "data": "",
            "text": "本篇文档介绍了",  # 处理后数据
            "meta": {
                "fileName": "xxx.doc"
            }  # 处理后数据元信息 
        },
        "contextData": ""
    },
    {}
]
```

